#!/usr/bin/env ruby
require 'socket'
require 'json'

host, port = "127.0.0.1", 9999
if ARGV[0] == "-s"
  host, port = ARGV[1].split(":")
  ARGV.shift; ARGV.shift
end

s = TCPSocket.new("127.0.0.1", 9999)
s.puts(ARGV.join(' '))
puts JSON::pretty_generate(JSON::parse(s.readline))
s.close
